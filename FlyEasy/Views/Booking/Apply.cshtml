@model int?

@{
    ViewData["Title"] = "Apply for Flight";
}

<div class="container mt-5">

    <div class="alert alert-primary text-center shadow-sm mb-4">
        <i class="bi bi-ticket-perforated-fill me-2"></i>
        <strong>Apply for Flight</strong> — Please enter the number of tickets you'd like to book.
    </div>

    <form method="post" asp-action="Apply" class="w-50 mx-auto" id="bookingForm">
        <div class="mb-3">
            <label for="NumberOfTickets" class="form-label">Number of Tickets</label>
            <input type="number"
                   name="NumberOfTickets"
                   id="NumberOfTickets"
                   class="form-control"
                   min="1"
                   required
                   placeholder="e.g. 3" />
        </div>

        <input type="hidden" name="FlightId" value="@ViewBag.FlightId" />

     
        <div id="warningMessage" class="text-danger text-center mb-3" style="display: none;">
         
        </div>

        <div class="text-center">
            <button type="submit" class="btn btn-primary px-4 py-2 mb-3 mb-sm-3">
                Continue
            </button>
        </div>
    </form>
</div>

<script>
    const availableSeats = @ViewBag.AvailableSeats;
    const form = document.getElementById("bookingForm");
    const ticketInput = document.getElementById("NumberOfTickets");
    const warningDiv = document.getElementById("warningMessage");

    form.addEventListener("submit", function (e) {
        const requested = parseInt(ticketInput.value);
        if (requested > availableSeats) {
            e.preventDefault();
            warningDiv.textContent = `Only ${availableSeats} seat(s) are available. Please enter a valid number.`;
            warningDiv.style.display = "block";
        } else {
            warningDiv.style.display = "none";
        }
    });
</script>

















